!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.aemReactEditableComponents=t():e.aemReactEditableComponents=t()}(function(){try{return"undefined"!=typeof self}catch(e){return!1}}()?self:this,(()=>(()=>{var e={906:function(e){(function(){try{return"undefined"!=typeof self}catch(e){return!1}})()&&self,e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};let n;e.r(t),e.d(t,{ComponentMapping:()=>a,MapTo:()=>o});class a{constructor(){return n||(n=this),n}static get instance(){return new this}map(e,t){a.map(e,t)}static map(e,t){e&&t&&("string"==typeof e?[e]:e).forEach((e=>{this.mapping[e]=t}))}lazyMap(e,t){a.lazyMap(e,t)}static lazyMap(e,t){e&&t&&("string"==typeof e?[e]:e).forEach((e=>{this.lazyMapping[e]=t}))}get(e){return a.get(e)}static get(e){return this.mapping[e]}getLazy(e){return a.getLazy(e)}static getLazy(e){return this.lazyMapping[e]?this.lazyMapping[e]():Promise.reject("resourceType "+e+" not found in mappings!")}}a.mapping={},a.lazyMapping={};const o=e=>t=>a.instance.map(e,t);return t})()},967:(e,t)=>{"use strict";t.N=void 0;var n=/^([^\w]*)(javascript|data|vbscript)/im,a=/&#(\w+)(^\w|;)?/g,o=/&(newline|tab);/gi,r=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,s=/^.+(:|&colon;)/gim,c=[".","/"];t.N=function(e){var t,l=(t=e||"",t.replace(a,(function(e,t){return String.fromCharCode(t)}))).replace(o,"").replace(r,"").trim();if(!l)return"about:blank";if(function(e){return c.indexOf(e[0])>-1}(l))return l;var i=l.match(s);if(!i)return l;var p=i[0];return n.test(p)?"about:blank":l}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{"use strict";n.r(a),n.d(a,{Container:()=>E,EditableComponent:()=>P,MapTo:()=>r,Page:()=>b,ResponsiveGrid:()=>A,fetchModel:()=>g});var e=n(906);const t=e.ComponentMapping.map,o=e.ComponentMapping.get;e.ComponentMapping.map=function(n,a){return t.call(e.ComponentMapping,n,a),a},e.ComponentMapping.get=o;const r=t=>n=>e.ComponentMapping.map(t,n),s=require("react");var c=n.n(s),l=n(967);const i={modelToProps(e){if(!e||!Object.keys(e).length)return{cqPath:""};const t=Object.getOwnPropertyNames(e),n={};return t.forEach((t=>{const a=t.startsWith(":")?function(e){const t=e.substring(1);return"cq"+t.substring(0,1).toUpperCase()+t.substring(1)}(t):t;n[a]=e[t]||""})),n},getCQPath(e){const{pagePath:t="",itemPath:n="",cqPath:a=""}=e;return t&&!a?(0,l.N)(n?`${t}/jcr:content/${n}`:t).replace(/\/+/g,"/").replace(/\/$/,""):a}},p=require("@adobe/aem-spa-page-model-manager"),m=Object.freeze({DATA_PATH_ATTR:"data-cq-data-path",DATA_CQ_RESOURCE_TYPE_ATTR:"data-cq-resource-type",ASYNC_CONTENT_LOADED_EVENT:"cq-async-content-loaded",_WCM_MODE_META_SELECTOR:'meta[property="cq:wcmmode"]',TYPE:p.Constants.TYPE_PROP,ITEMS:p.Constants.ITEMS_PROP,ITEMS_ORDER:p.Constants.ITEMS_ORDER_PROP,PATH:p.Constants.PATH_PROP,CHILDREN:p.Constants.CHILDREN_PROP,HIERARCHY_TYPE:p.Constants.HIERARCHY_TYPE_PROP,JCR_CONTENT:p.Constants.JCR_CONTENT}),d=Object.freeze({DEFAULT:"appliedCssClassNames",NEW_SECTION:"new section",CONTAINER:"aem-container",DEFAULT_PLACEHOLDER:"cq-placeholder",PAGE:"aem-page",RESPONSIVE_GRID_PLACEHOLDER:"aem-Grid-newComponent",ALLOWED_LIST_PLACEHOLDER:"aem-AllowedComponent--list",ALLOWED_COMPONENT_TITLE:"aem-AllowedComponent--title",ALLOWED_COMPONENT_PLACEHOLDER:"aem-AllowedComponent--component cq-placeholder placeholder",RESPONSIVE_GRID_PLACEHOLDER_CLASS_NAMES:"aem-Grid-newComponent"});const u=t=>{var{cqItemsOrder:n,cqItems:a,cqPath:o="",getItemClassNames:r,isPage:s}=t,l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n}(t,["cqItemsOrder","cqItems","cqPath","getItemClassNames","isPage"]);const p=l.componentMapping||e.ComponentMapping;if(!n||!a||!n.length)return c().createElement(c().Fragment,null);const d=[];return n.forEach((e=>{const t=i.modelToProps(a[e]),n=r&&r(e)||"";if(t&&t.cqType){const a=p.get(t.cqType),r=((e,t,n=!1)=>{let a=t;return e&&(a=n?`${e}/${m.JCR_CONTENT}/${t}`:`${e}/${t}`),a})(o,e,s);a?d.push(c().createElement(a,{key:r,model:t,cqPath:r,className:n,removeDefaultStyles:l.removeDefaultStyles})):console.error("Component not mapped for resourcetype:",t.cqType)}})),c().createElement(c().Fragment,null,d)},E=e=>{const{cqPath:t="",className:n="",isPage:a=!1,isInEditor:o,childPages:s,placeholderClassNames:l="",components:i,model:p={}}=e;if(i&&Object.keys(i).length)for(const e in i)r(e)(i[e]);const E=o&&{[m.DATA_PATH_ATTR]:t}||{},f=c().createElement(u,Object.assign({},p,e));return o?c().createElement("div",Object.assign({className:n||d.CONTAINER},E),f,s,!a&&o&&c().createElement("div",{"data-cq-data-path":`${t}/*`,className:`${d.NEW_SECTION} ${l}`})):c().createElement("div",{className:n},f,s)},f=Object.freeze({ASYNC_CONTENT_LOADED_EVENT:"cq-async-content-loaded"});var O=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function s(e){try{l(a.next(e))}catch(e){r(e)}}function c(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}l((a=a.apply(e,t||[])).next())}))};function g({cqPath:e,forceReload:t=!1,pagePath:n,itemPath:a,host:o,options:r}){return O(this,void 0,void 0,(function*(){let s,c={};if(e||n){const m=e&&(0,l.N)(e)||i.getCQPath({pagePath:n,itemPath:a});if(o){const e=(0,l.N)(`${o}/${m}`).replace(/\/+/g,"/"),t=yield fetch(`${e}.model.json`,r);t.ok&&(s=yield t.json())}else s=yield p.ModelManager.getData({path:m,forceReload:t}).catch((e=>console.error(e)));s&&Object.keys(s).length&&(c=i.modelToProps(s))}return c}))}const y=e=>{var{config:t}=e,n=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n}(e,["config"]);const{emptyLabel:a="",isEmpty:o}=t||{},r={};return"function"==typeof o&&o(n)&&Object.assign(r,{className:d.DEFAULT_PLACEHOLDER,"data-emptytext":a}),c().createElement("div",Object.assign({},r))};const P=e=>{var t;const{config:n={isEmpty:()=>!1},children:a,model:o,cqPath:r,pagePath:l,itemPath:d,isInEditor:u=p.AuthoringUtils.isInEditor(),className:E="",appliedCssClassNames:O=""}=e,P=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n}(e,["config","children","model","cqPath","pagePath","itemPath","isInEditor","className","appliedCssClassNames"]),{updateModel:h}={updateModel:(0,s.useCallback)((({path:e,forceReload:t,pagePath:n,setModel:a,isInEditor:o})=>{return r=void 0,s=void 0,l=function*(){const r=yield g({cqPath:e,forceReload:t,pagePath:n}).catch((e=>console.error(e)));r&&Object.keys(r).length&&(a(r),o&&p.PathUtils.dispatchGlobalCustomEvent(f.ASYNC_CONTENT_LOADED_EVENT,{}))},new((c=void 0)||(c=Promise))((function(e,t){function n(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof c?o:new c((function(e){e(o)}))).then(n,a)}o((l=l.apply(r,s||[])).next())}));var r,s,c,l}),[])},{forceReload:C,resourceType:b=""}=n||{},T=r||i.getCQPath({cqPath:r,pagePath:l,itemPath:d}),[N,v]=c().useState((()=>o||{}));if(c().useEffect((()=>{var e;const t=()=>h({path:T,forceReload:C,setModel:v,isInEditor:u,pagePath:l});return!(null===(e=Object.keys(N))||void 0===e?void 0:e.length)&&t(),p.ModelManager.addListener(T,t),()=>{p.ModelManager.removeListener(T,t)}}),[T,N,h,u,l,C]),!e)return c().createElement(c().Fragment,null);const _=Object.assign({cqPath:T},N),j=u&&{[m.DATA_PATH_ATTR]:T,[m.DATA_CQ_RESOURCE_TYPE_ATTR]:b}||{},A=`${E} ${(null===(t=P.containerProps)||void 0===t?void 0:t.className)||""} ${O}`.trim(),L=((e,t)=>c().isValidElement(e)?c().cloneElement(e,t):e)(a,l?_:N);return u||!P.removeDefaultStyles&&A?c().createElement("div",Object.assign({className:A},j),L,u&&c().createElement(y,Object.assign({config:n},_))):c().createElement(c().Fragment,null,L)};var h=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};const C=t=>{var{cqChildren:n}=t,a=h(t,["cqChildren"]);const o=a.componentMapping||e.ComponentMapping;if(!n)return c().createElement(c().Fragment,null);const r=[];return Object.keys(n).forEach((e=>{const t=i.modelToProps(n[e]),{cqPath:s,cqType:l}=t;if(l){const e=o.get(l);e?r.push(c().createElement(e,{model:t,key:s,cqPath:s,isInEditor:a.isInEditor})):console.error("Component not mapped for resourcetype:",l)}})),c().createElement(c().Fragment,null,r)},b=e=>{var{className:t}=e,n=h(e,["className"]);return c().createElement(P,Object.assign({},n),c().createElement(E,Object.assign({className:`${d.PAGE} ${t||""}`,isPage:!0,childPages:c().createElement(C,Object.assign({},n))},n)))},T=Object.freeze({EMPTY_LABEL:"No allowed components",EMPTY_COMPONENT_TITLE:"–"}),N=e=>{const{placeholderClassNames:t="",allowedComponents:n,title:a}=e,{components:o}=n,r=o&&o.length>0?a:T.EMPTY_LABEL;return c().createElement("div",{className:`${d.ALLOWED_LIST_PLACEHOLDER} ${d.NEW_SECTION} ${t}`},c().createElement("div",{"data-text":r,className:d.ALLOWED_COMPONENT_TITLE}),o.map((e=>c().createElement("div",{"data-cq-data-path":e.path,key:e.path,"data-emptytext":e.title?e.title:T.EMPTY_COMPONENT_TITLE,className:d.ALLOWED_COMPONENT_PLACEHOLDER}))))};var v=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n};const _="wcm/foundation/components/responsivegrid",j=e=>{var t,{title:n="Layout Container",columnClassNames:a,isInEditor:o}=e,r=v(e,["title","columnClassNames","isInEditor"]);let s=r.customClassName||"";!o&&r.removeDefaultStyles||(s=`${s} ${r.gridClassNames||""} ${d.CONTAINER}`);const l=Object.assign(Object.assign({},r),{className:s,getItemClassNames:e=>a&&a[e]?a[e]:"",placeholderClassNames:d.RESPONSIVE_GRID_PLACEHOLDER_CLASS_NAMES,isInEditor:o});return(null===(t=r.allowedComponents)||void 0===t?void 0:t.applicable)&&o?c().createElement(N,Object.assign({},l,{title:n})):c().createElement(E,Object.assign({},l))},A=e=>{var{isInEditor:t=p.AuthoringUtils.isInEditor()}=e,n=v(e,["isInEditor"]);const a={isEmpty:e=>e.cqItemsOrder&&e.cqItemsOrder.length>0||!1,resourceType:_};return c().createElement(P,Object.assign({config:a},n),c().createElement(j,Object.assign({},n,{isInEditor:t})))};r(_)(A)})(),a})()));